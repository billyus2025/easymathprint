<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Math Worksheet Generator | EasyMathPrint</title>
    <meta name="description" content="Generate free printable math worksheets for grades K‚Äì5. Includes addition, subtraction, multiplication, division, mixed practice, and answer keys. Perfect for teachers and parents worldwide.">
    
    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Screen-only styles */
        @media screen {
            #answer-key {
                display: none;
            }
            
            #answer-key.show-answers {
                display: block;
            }
        }
        
        /* Worksheet page styling */
        .worksheet-page {
            background: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin: 0 auto;
            padding: 1rem;
        }
        
        @media screen {
            .worksheet-page {
                max-width: 800px;
                padding: 2rem;
            }
        }
        
        /* Problem grid */
        .problem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .problem-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (min-width: 1024px) {
            .problem-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* Problem styling */
        .problem {
            font-size: 1.25rem;
            padding: 0.75rem;
            border-bottom: 2px dotted #ccc;
        }
        
        .problem-number {
            font-weight: bold;
            margin-right: 0.5rem;
        }
        
        .answer-blank {
            border-bottom: 2px solid #000;
            min-width: 60px;
            display: inline-block;
            text-align: center;
            margin: 0 0.25rem;
        }
        
        .answer-value {
            color: #dc2626;
            font-weight: bold;
        }
        
        /* Homepage grid */
        .homepage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .worksheet-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        
        .worksheet-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .worksheet-card h3 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        .worksheet-card p {
            color: #6b7280;
            font-size: 0.9rem;
        }
        
        /* Back button */
        .back-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }
        
        /* Print Styles - Final Print Patch v3 */
        @media print {
            @page {
                size: Letter;
                margin: 12mm;
            }

            html, body {
                margin: 0 !important;
                padding: 0 !important;
                height: auto !important;
            }

            .page {
                page-break-inside: avoid;
                break-inside: avoid-page;
                margin-bottom: 16px;
            }

            #student-sheet {
                page-break-before: avoid;
            }

            #answer-key {
                page-break-before: always;
                break-before: page;
                page-break-after: avoid;
            }

            /* Hide UI in print */
            .no-print, aside, button, select {
                display: none !important;
            }

            * {
                background: transparent !important;
                box-shadow: none !important;
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="app-container" class="container mx-auto px-4 py-6">
                        <div class="text-center mb-8">
                    <h1 class="text-5xl font-bold mb-4">üßÆ EasyMathPrint</h1>
                    <p class="text-xl text-gray-600 mb-8">Free Printable Math Worksheets for Teachers and Parents</p>
                </div>
                
                <div class="homepage-grid" id="worksheet-grid">
                    <a href="/addition/" class="worksheet-card">
                        <h3>Addition Worksheets</h3>
                        <p>Free printable addition worksheets for students. Perfect for building basic math skills.</p>
                    </a>
                    <a href="/subtraction/" class="worksheet-card">
                        <h3>Subtraction Worksheets</h3>
                        <p>Free printable subtraction worksheets with no negative results. Great for early learners.</p>
                    </a>
                    <a href="/multiplication/" class="worksheet-card">
                        <h3>Multiplication Worksheets</h3>
                        <p>Free printable multiplication tables and practice worksheets. Builds foundational math skills.</p>
                    </a>
                    <a href="/division/" class="worksheet-card">
                        <h3>Division Worksheets</h3>
                        <p>Free printable division worksheets with whole number results. Perfect for grades 3‚Äì5.</p>
                    </a>
                    <a href="/mixed/" class="worksheet-card">
                        <h3>Mixed Operations Worksheets</h3>
                        <p>Free printable mixed addition, subtraction, multiplication, and division problems.</p>
                    </a>
                    <a href="/fractions/" class="worksheet-card">
                        <h3>Fraction Worksheets</h3>
                        <p>Free printable fraction addition and subtraction worksheets with like denominators.</p>
                    </a>
                    <a href="/place-value/" class="worksheet-card">
                        <h3>Place Value Worksheets</h3>
                        <p>Free printable place value worksheets for ones, tens, hundreds, and thousands practice.</p>
                    </a>
                    <a href="/number-line/" class="worksheet-card">
                        <h3>Number Line Worksheets</h3>
                        <p>Free printable number line worksheets for skip counting and missing numbers.</p>
                    </a>
                    <a href="/money-counting/" class="worksheet-card">
                        <h3>Money Counting Worksheets</h3>
                        <p>Free printable US coins and bills counting practice worksheets.</p>
                    </a>
                    <a href="/measurement/" class="worksheet-card">
                        <h3>Measurement Worksheets</h3>
                        <p>Free printable measurement worksheets for length, weight, and capacity conversions.</p>
                    </a>
                    <a href="/comparing-numbers/" class="worksheet-card">
                        <h3>Comparing Numbers Worksheets</h3>
                        <p>Free printable worksheets for greater than, less than, and equal to practice.</p>
                    </a>
                    <a href="/patterns/" class="worksheet-card">
                        <h3>Number Pattern Worksheets</h3>
                        <p>Free printable number pattern worksheets for addition, subtraction, multiplication, and division patterns.</p>
                    </a>
                    <a href="/bar-graphs/" class="worksheet-card">
                        <h3>Bar Graph Worksheets</h3>
                        <p>Free printable bar graph worksheets for reading and interpreting data.</p>
                    </a>
                    <a href="/tally-charts/" class="worksheet-card">
                        <h3>Tally Chart Worksheets</h3>
                        <p>Free printable tally chart worksheets for counting with tally marks and frequency tables.</p>
                    </a>
                    <a href="/probability/" class="worksheet-card">
                        <h3>Probability Worksheets</h3>
                        <p>Free printable probability worksheets with spinners and bags for basic probability practice.</p>
                    </a>
                    <a href="/coordinate-plane/" class="worksheet-card">
                        <h3>Coordinate Plane Worksheets</h3>
                        <p>Free printable coordinate plane worksheets for plotting and identifying points in quadrant I.</p>
                    </a>
                    <a href="/factors-multiples/" class="worksheet-card">
                        <h3>Factors & Multiples Worksheets</h3>
                        <p>Free printable worksheets for finding factors, multiples, and prime numbers.</p>
                    </a>
                    <a href="/area-perimeter/" class="worksheet-card">
                        <h3>Area & Perimeter Worksheets</h3>
                        <p>Free printable area and perimeter worksheets for rectangles and squares.</p>
                    </a>
                    <a href="/fraction-multiply/" class="worksheet-card">
                        <h3>Fraction Multiplication Worksheets</h3>
                        <p>Free printable fraction multiplication worksheets for simple and mixed fractions.</p>
                    </a>
                    <a href="/decimals/" class="worksheet-card">
                        <h3>Decimal Worksheets</h3>
                        <p>Free printable decimal worksheets for addition, subtraction, multiplication, and division.</p>
                    </a>
                    <a href="/symmetry/" class="worksheet-card">
                        <h3>Symmetry Worksheets</h3>
                        <p>Free printable symmetry worksheets for identifying and drawing lines of symmetry.</p>
                    </a>
                    <a href="/rounding/" class="worksheet-card">
                        <h3>Rounding Worksheets</h3>
                        <p>Free printable rounding worksheets for rounding whole numbers and decimals.</p>
                    </a>
                </div>
                
                <footer class="no-print text-center mt-12 text-gray-600 text-sm">
                    Generated for free at EasyMathPrint.com ‚Äî ¬© 2025
                </footer>
        <!-- Content will be dynamically rendered here -->
    </div>
    
    <script>
        // ============================================
        // WORKSHEET CONFIGURATION
        // ============================================
        const worksheetConfig = {
            "addition": {
                title: "Addition Worksheets",
                icon: "‚ûï",
                type: "addition",
                defaultRange: 20,
                defaultCount: 20,
                description: "Addition practice for Grades K‚Äì3. Perfect for building basic math skills.",
                ranges: [10, 20, 50, 100],
                counts: [10, 20, 30]
            },
            "subtraction": {
                title: "Subtraction Worksheets",
                icon: "‚ûñ",
                type: "subtraction",
                defaultRange: 20,
                defaultCount: 20,
                description: "Subtraction practice with no negative results. Great for early learners.",
                ranges: [10, 20, 50, 100],
                counts: [10, 20, 30]
            },
            "multiplication": {
                title: "Multiplication Worksheets",
                icon: "‚úñÔ∏è",
                type: "multiplication",
                defaultRange: 12,
                defaultCount: 20,
                description: "Multiplication tables and practice. Builds foundational math skills.",
                ranges: [5, 10, 12, 20],
                counts: [10, 20, 30]
            },
            "division": {
                title: "Division Worksheets",
                icon: "‚ûó",
                type: "division",
                defaultRange: 12,
                defaultCount: 20,
                description: "Division practice with whole number results. Perfect for grades 3‚Äì5.",
                ranges: [5, 10, 12, 20],
                counts: [10, 20, 30]
            },
            "mixed": {
                title: "Mixed Operations Worksheets",
                icon: "üîÄ",
                type: "mixed",
                defaultRange: 20,
                defaultCount: 20,
                description: "Mixed addition, subtraction, multiplication, and division problems.",
                ranges: [10, 20, 50, 100],
                counts: [10, 20, 30]
            },
            "fractions": {
                title: "Fraction Worksheets",
                icon: "üî¢",
                type: "fractions",
                defaultRange: 10,
                defaultCount: 20,
                description: "Fraction addition and subtraction with like denominators.",
                ranges: [10, 20],
                counts: [10, 20, 30]
            },
            "place-value": {
                title: "Place Value Worksheets",
                icon: "üî¢",
                type: "place-value",
                defaultRange: 999,
                defaultCount: 20,
                description: "Ones, tens, hundreds, and thousands place value practice.",
                ranges: [999, 9999],
                counts: [10, 20, 30]
            },
            "number-line": {
                title: "Number Line Worksheets",
                icon: "üìè",
                type: "number-line",
                defaultRange: 50,
                defaultCount: 10,
                description: "Skip counting and missing numbers on number lines.",
                ranges: [20, 50, 100],
                counts: [5, 10]
            },
            "money-counting": {
                title: "Money Counting Worksheets",
                icon: "üí∞",
                type: "money-counting",
                defaultRange: 20,
                defaultCount: 20,
                description: "US coins and bills counting practice.",
                ranges: [10, 20],
                counts: [10, 20, 30]
            },
            "measurement": {
                title: "Measurement Worksheets",
                icon: "üìè",
                type: "measurement",
                defaultRange: 100,
                defaultCount: 20,
                description: "Length, weight, and capacity conversions.",
                ranges: [50, 100],
                counts: [10, 20, 30]
            },
            "comparing-numbers": {
                title: "Comparing Numbers Worksheets",
                icon: "üî¢",
                type: "comparing-numbers",
                defaultRange: 100,
                defaultCount: 20,
                description: "Greater than, less than, and equal to practice.",
                ranges: [20, 100, 1000],
                counts: [10, 20, 30]
            },
            "patterns": {
                title: "Number Pattern Worksheets",
                icon: "üîÑ",
                type: "patterns",
                defaultRange: 20,
                defaultCount: 20,
                description: "Addition, subtraction, multiplication, and division patterns.",
                ranges: [10, 20],
                counts: [10, 20, 30]
            },
            "bar-graphs": {
                title: "Bar Graph Worksheets",
                icon: "üìä",
                type: "bar-graphs",
                defaultRange: 10,
                defaultCount: 5,
                description: "Reading and interpreting bar graphs.",
                ranges: [10, 20],
                counts: [5, 10]
            },
            "tally-charts": {
                title: "Tally Chart Worksheets",
                icon: "üìä",
                type: "tally-charts",
                defaultRange: 20,
                defaultCount: 5,
                description: "Counting with tally marks and frequency tables.",
                ranges: [5, 10, 20],
                counts: [5, 10]
            },
            "probability": {
                title: "Probability Worksheets",
                icon: "üé≤",
                type: "probability",
                defaultRange: 6,
                defaultCount: 10,
                description: "Basic probability with spinners and bags.",
                ranges: [6, 10],
                counts: [10, 20]
            },
            "coordinate-plane": {
                title: "Coordinate Plane Worksheets",
                icon: "üìç",
                type: "coordinate-plane",
                defaultRange: 20,
                defaultCount: 10,
                description: "Plotting and identifying points in quadrant I.",
                ranges: [10, 20],
                counts: [10, 20]
            },
            "factors-multiples": {
                title: "Factors & Multiples Worksheets",
                icon: "üî¢",
                type: "factors-multiples",
                defaultRange: 100,
                defaultCount: 20,
                description: "Finding factors, multiples, and prime numbers.",
                ranges: [50, 100],
                counts: [10, 20, 30]
            },
            "area-perimeter": {
                title: "Area & Perimeter Worksheets",
                icon: "üìê",
                type: "area-perimeter",
                defaultRange: 20,
                defaultCount: 10,
                description: "Calculating area and perimeter of rectangles and squares.",
                ranges: [10, 20],
                counts: [10, 20]
            },
            "fraction-multiply": {
                title: "Fraction Multiplication Worksheets",
                icon: "‚úñÔ∏è",
                type: "fraction-multiply",
                defaultRange: 9,
                defaultCount: 20,
                description: "Multiplying simple and mixed fractions.",
                ranges: [9],
                counts: [10, 20, 30]
            },
            "decimals": {
                title: "Decimal Worksheets",
                icon: "üî¢",
                type: "decimals",
                defaultRange: 2,
                defaultCount: 20,
                description: "Decimal addition, subtraction, multiplication, and division.",
                ranges: [1, 2],
                counts: [10, 20, 30]
            },
            "symmetry": {
                title: "Symmetry Worksheets",
                icon: "üîÑ",
                type: "symmetry",
                defaultRange: 4,
                defaultCount: 10,
                description: "Identifying and drawing lines of symmetry.",
                ranges: [3, 4],
                counts: [10, 20]
            },
            "rounding": {
                title: "Rounding Worksheets",
                icon: "üî¢",
                type: "rounding",
                defaultRange: 100,
                defaultCount: 20,
                description: "Rounding whole numbers and decimals.",
                ranges: [10, 100, 1000],
                counts: [10, 20, 30]
            }
        };
        
        // ============================================
        // ROUTER
        // ============================================
        function getURLParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        
        function navigateTo(id) {
            if (id) {
                window.history.pushState({ id }, '', `?id=${id}`);
            } else {
                window.history.pushState({}, '', '/');
            }
            render();
        }
        
        // ============================================
        // STATE
        // ============================================
        let currentQuestions = [];
        let answersVisible = false;
        let currentWorksheetId = null;
        
        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        function randomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        
        // ============================================
        // HOMEPAGE RENDERER
        // ============================================
        function renderHomepage() {
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="text-center mb-8">
                    <h1 class="text-5xl font-bold mb-4">üßÆ EasyMathPrint</h1>
                    <p class="text-xl text-gray-600 mb-8">Free Printable Math Worksheets for Teachers and Parents</p>
                </div>
                
                <div class="homepage-grid" id="worksheet-grid">
                    ${Object.keys(worksheetConfig).map(id => {
                        const config = worksheetConfig[id];
                        return `
                            <div class="worksheet-card" onclick="navigateTo('${id}')">
                                <div class="text-4xl mb-3">${config.icon}</div>
                                <h3>${config.title}</h3>
                                <p>${config.description}</p>
                            </div>
                        `;
                    }).join('')}
                </div>
                
                <footer class="no-print text-center mt-12 text-gray-600 text-sm">
                    Generated for free at EasyMathPrint.com ‚Äî ¬© ${new Date().getFullYear()}
                </footer>
            `;
        }
        
        // ============================================
        // WORKSHEET GENERATION LOGIC
        // ============================================
        function generateQuestion(operator, maxRange) {
            let a, b, answer;
            
            switch(operator) {
                case '+':
                    a = randomInt(1, maxRange);
                    b = randomInt(1, maxRange);
                    answer = a + b;
                    break;
                    
                case '-':
                    a = randomInt(2, maxRange);
                    b = randomInt(1, a);
                    answer = a - b;
                    break;
                    
                case '*':
                    a = randomInt(1, Math.min(12, maxRange));
                    b = randomInt(1, Math.min(12, maxRange));
                    answer = a * b;
                    break;
                    
                case '/':
                    b = randomInt(2, Math.min(12, maxRange));
                    const quotient = randomInt(1, Math.floor(maxRange / b));
                    a = b * quotient;
                    answer = quotient;
                    break;
                    
                default:
                    const operators = ['+', '-', '*', '/'];
                    const op = operators[randomInt(0, operators.length - 1)];
                    return generateQuestion(op, maxRange);
            }
            
            return { a, b, operator, answer };
        }
        
        function generateQuestions() {
            const config = worksheetConfig[currentWorksheetId];
            if (!config) return;
            
            const topic = config.type;
            const maxRange = parseInt(document.getElementById('range').value);
            const count = parseInt(document.getElementById('count').value);
            
            const questions = [];
            let operator;
            
            if (topic === 'addition') operator = '+';
            else if (topic === 'subtraction') operator = '-';
            else if (topic === 'multiplication') operator = '*';
            else if (topic === 'division') operator = '/';
            else operator = 'mixed';
            
            for (let i = 0; i < count; i++) {
                questions.push(generateQuestion(operator, maxRange));
            }
            
            currentQuestions = questions;
            renderWorksheetContent();
        }
        
        function renderWorksheetContent() {
            const studentContainer = document.getElementById('student-problems');
            const answerContainer = document.getElementById('answer-problems');
            
            if (!studentContainer || !answerContainer) return;
            
            studentContainer.innerHTML = '';
            answerContainer.innerHTML = '';
            
            const operatorSymbols = {
                '+': '+',
                '-': '‚àí',
                '*': '√ó',
                '/': '√∑'
            };
            
            currentQuestions.forEach((q, index) => {
                const problemDiv = document.createElement('div');
                problemDiv.className = 'problem';
                
                const problemNumber = document.createElement('span');
                problemNumber.className = 'problem-number';
                problemNumber.textContent = `${index + 1}.`;
                
                const problemText = document.createElement('span');
                problemText.innerHTML = `${q.a} ${operatorSymbols[q.operator] || q.operator} ${q.b} = <span class="answer-blank"></span>`;
                
                problemDiv.appendChild(problemNumber);
                problemDiv.appendChild(problemText);
                studentContainer.appendChild(problemDiv);
            });
            
            currentQuestions.forEach((q, index) => {
                const problemDiv = document.createElement('div');
                problemDiv.className = 'problem';
                
                const problemNumber = document.createElement('span');
                problemNumber.className = 'problem-number';
                problemNumber.textContent = `${index + 1}.`;
                
                const problemText = document.createElement('span');
                problemText.innerHTML = `${q.a} ${operatorSymbols[q.operator] || q.operator} ${q.b} = <span class="answer-value">${q.answer}</span>`;
                
                problemDiv.appendChild(problemNumber);
                problemDiv.appendChild(problemText);
                answerContainer.appendChild(problemDiv);
            });
        }
        
        // ============================================
        // WORKSHEET MODE RENDERER
        // ============================================
        function renderWorksheet(id) {
            const config = worksheetConfig[id];
            if (!config) {
                renderHomepage();
                return;
            }
            
            currentWorksheetId = id;
            
            // Update SEO
            document.title = `${config.title} | EasyMathPrint`;
            document.querySelector('meta[name="description"]').content = config.description;
            
            const container = document.getElementById('app-container');
            container.innerHTML = `
                <div class="relative">
                    <button class="back-button no-print bg-gray-600 hover:bg-gray-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center gap-2" onclick="navigateTo()">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back to Home</span>
                    </button>
                </div>
                
                <div class="flex flex-col md:flex-row gap-6 mt-4">
                    <!-- Sidebar (Control Panel) -->
                    <aside class="no-print w-full md:w-80 flex-shrink-0">
                        <div class="bg-white rounded-lg shadow-lg p-6 space-y-6">
                            <!-- Title -->
                            <h1 class="text-3xl font-bold text-center mb-6">
                                ${config.icon} ${config.title}
                            </h1>
                            
                            <!-- Number Range -->
                            <div>
                                <label class="block text-sm font-semibold mb-2">Number Range</label>
                                <select id="range" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    ${config.ranges.map(r => {
                                        const label = r === 5 ? '1‚Äì5' : r === 9 ? '1‚Äì9' : r === 10 ? '1‚Äì10' : r === 12 ? '1‚Äì12' : r === 20 ? '1‚Äì20' : r === 50 ? '1‚Äì50' : r === 100 ? '1‚Äì100' : r === 999 ? '10‚Äì999' : r === 9999 ? '100‚Äì9999' : `1‚Äì${r}`;
                                        return `<option value="${r}" ${r === config.defaultRange ? 'selected' : ''}>${label}</option>`;
                                    }).join('')}
                                </select>
                            </div>
                            
                            <!-- Question Count -->
                            <div>
                                <label class="block text-sm font-semibold mb-2">Question Count</label>
                                <select id="count" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    ${config.counts.map(c => 
                                        `<option value="${c}" ${c === config.defaultCount ? 'selected' : ''}>${c}</option>`
                                    ).join('')}
                                </select>
                            </div>
                            
                            <!-- Buttons -->
                            <div class="space-y-3">
                                <button id="generate-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                                    <i class="fas fa-magic"></i>
                                    <span>Generate Worksheet</span>
                                </button>
                                
                                <button id="print-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                                    <i class="fas fa-print"></i>
                                    <span>Print / Save PDF</span>
                                </button>
                                
                                <button id="toggle-answers-btn" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
                                    <i class="fas fa-eye"></i>
                                    <span>Show/Hide Answers</span>
                                </button>
                            </div>
                            
                            <!-- Ad Box -->
                            <div class="bg-gray-200 rounded-lg flex items-center justify-center" style="width: 300px; height: 250px; margin: 0 auto;">
                                <span class="text-gray-500 font-semibold">Ad Space</span>
                            </div>
                        </div>
                    </aside>
                    
                    <!-- Worksheet Area -->
                    <main class="flex-1">
                        <div id="worksheet-container" class="space-y-6">
                            <!-- Student Sheet (Page 1) -->
                            <div id="student-sheet" class="worksheet-page page">
                                <div class="mb-6">
                                    <div class="flex justify-between items-center mb-4">
                                        <div class="flex-1">
                                            <div class="mb-2">
                                                <span class="font-semibold">Name:</span>
                                                <span class="border-b-2 border-black inline-block min-w-[200px] ml-2"></span>
                                            </div>
                                            <div class="mb-2">
                                                <span class="font-semibold">Date:</span>
                                                <span class="border-b-2 border-black inline-block min-w-[200px] ml-2"></span>
                                            </div>
                                            <div>
                                                <span class="font-semibold">Score:</span>
                                                <span class="border-b-2 border-black inline-block min-w-[200px] ml-2"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="problem-grid" id="student-problems">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                            
                            <!-- Answer Key (Page 2) -->
                            <div id="answer-key" class="worksheet-page page">
                                <h2 class="text-2xl font-bold mb-6 text-center">Answer Key</h2>
                                <div class="problem-grid" id="answer-problems">
                                    <!-- Answers will be generated here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Footer -->
                        <footer class="no-print text-center mt-8 text-gray-600 text-sm">
                            Generated for free at EasyMathPrint.com ‚Äî ¬© <span id="year"></span>
                        </footer>
                    </main>
                </div>
            `;
            
            // Set year
            const yearEl = document.getElementById('year');
            if (yearEl) {
                yearEl.textContent = new Date().getFullYear();
            }
            
            // Attach event listeners
            document.getElementById('generate-btn').addEventListener('click', generateQuestions);
            document.getElementById('print-btn').addEventListener('click', () => window.print());
            document.getElementById('toggle-answers-btn').addEventListener('click', toggleAnswers);
            
            // Generate initial worksheet
            generateQuestions();
        }
        
        // ============================================
        // ANSWER TOGGLE
        // ============================================
        function toggleAnswers() {
            answersVisible = !answersVisible;
            const answerKey = document.getElementById('answer-key');
            const btn = document.getElementById('toggle-answers-btn');
            if (!answerKey || !btn) return;
            
            const icon = btn.querySelector('i');
            const span = btn.querySelector('span');
            
            if (answersVisible) {
                answerKey.classList.add('show-answers');
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
                if (span) span.textContent = 'Hide Answers';
            } else {
                answerKey.classList.remove('show-answers');
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
                if (span) span.textContent = 'Show/Hide Answers';
            }
        }
        
        // ============================================
        // MAIN RENDER FUNCTION
        // ============================================
        function render() {
            const id = getURLParam('id');
            if (id && worksheetConfig[id]) {
                renderWorksheet(id);
            } else {
                renderHomepage();
            }
        }
        
        // ============================================
        // INITIALIZATION
        // ============================================
        // Handle browser back/forward
        window.addEventListener('popstate', render);
        
        // Initial render
        render();
    </script>
</body>
</html>
